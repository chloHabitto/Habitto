#!/bin/bash

# Log Capture Script for Habitto App
# This script helps capture and analyze console logs from Xcode

echo "ğŸ“‹ Habitto Console Log Capture Helper"
echo "======================================"
echo ""
echo "This script helps you capture console logs from Xcode."
echo ""
echo "HOW TO USE:"
echo "1. Build and run the app in Xcode"
echo "2. Once the app launches, watch the console for 30 seconds"
echo "3. Copy all console output from the moment you see 'ğŸš€ AppDelegate: INIT CALLED'"
echo "4. Paste the logs into a file or share them directly"
echo ""
echo "EXPECTED LOG PATTERNS TO LOOK FOR:"
echo ""
echo "âœ… App Initialization:"
echo "   ğŸš€ AppDelegate: INIT CALLED"
echo "   ğŸš€ AppDelegate: didFinishLaunchingWithOptions called"
echo ""
echo "âœ… Firebase Configuration:"
echo "   âœ… AppDelegate: Firebase configured"
echo "   OR"
echo "   âœ… AppDelegate: Firebase already configured"
echo ""
echo "âœ… Authentication:"
echo "   âœ… SyncEngine: User authenticated - uid: {userId}"
echo ""
echo "âœ… Migrations (all 4 should complete):"
echo "   âœ… Guest data already migrated for user: {userId}"
echo "   OR"
echo "   âœ… Guest to auth migration complete!"
echo ""
echo "   ğŸ”„ MIGRATION: Completion status migration already completed"
echo "   OR"
echo "   ğŸ”„ MIGRATION: Completion status migration completed successfully"
echo ""
echo "   ğŸ”„ MIGRATION: Completion to Event migration already completed"
echo "   OR"
echo "   âœ… MIGRATION: Successfully migrated X completion records to events"
echo ""
echo "   ğŸ”„ XPDataMigration: Migration already completed, skipping"
echo "   OR"
echo "   âœ… XP_MIGRATION_COMPLETE: All data migrated successfully"
echo ""
echo "âœ… Sync Engine (authenticated users only):"
echo "   âœ… SyncEngine: startPeriodicSync() call completed"
echo ""
echo "âœ… Event Compaction:"
echo "   âœ… EventCompactor: Scheduling completed"
echo ""
echo "âš ï¸ ERRORS TO WATCH FOR:"
echo "   âŒ SyncEngine: Failed to authenticate user"
echo "   âš ï¸ Guest data migration failed"
echo "   âŒ MIGRATION: Failed to..."
echo "   âŒ SyncEngine: Failed to..."
echo ""
echo "======================================"
echo ""
echo "After capturing logs, you can:"
echo "1. Save them to a file: console_logs.txt"
echo "2. Share them for analysis"
echo "3. Use the log analyzer script to check patterns"
echo ""

